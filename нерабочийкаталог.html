<!DOCTYPE html>
<html>
  <head>
    <title>Каталог товаров</title>
  </head>
  <body>

    <!DOCTYPE html>
    <html>
    <head>
      <title>Магазин обуви</title>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script src="main.js"></script>
    </head>
    <body>
      <h1>Магазин обуви</h1>
    
        
      <h2>Товары</h2>
      <button id="compare-btn">Сравнение товаров</button>
      <ul id="products-list">
        <li data-sb-id-or-vendor-code="10"
          data-sb-product-name="Кроссовки"
          data-sb-product-price="100"
          data-sb-product-quantity="5"
          data-sb-product-img="products/кроссовки.jpg">
          <img src="products/palto.jpg" width="125" height="125" alt="">
          <h3>Кроссовки</h3>
          <p>Цена: 100 рублей</p>
          <button class="add-to-compare" data-product-id="4">Добавить в сравнение</button>
        </li>
        
        <li data-sb-id-or-vendor-code="20"
          data-sb-product-name="Туфли"
          data-sb-product-price="150"
          data-sb-product-quantity="2"
          data-sb-product-img="products/туфли.jpg">
          <img src="products/туфли.jpg" width="125" height="125" alt="">
          <h3>Туфли</h3>
          <p>Цена: 150 рублей</p>
          <button class="add-to-compare" data-product-id="4">Добавить в сравнение</button>
        </li>
        <li data-sb-id-or-vendor-code="30"
          data-sb-product-name="Ботинки"
          data-sb-product-price="180"
          data-sb-product-quantity="3"
          data-sb-product-img="products/ботинки.jpg" >
          <img src="products/ботинки.jpg"  width="125" height="125" alt="">
          <h3>Ботинки</h3>
          <p>Цена: 180 рублей</p>
          <button class="add-to-compare" data-product-id="4">Добавить в сравнение</button>
        </li>
        <li data-sb-id-or-vendor-code="40"
          data-sb-product-name="Сапоги"
          data-sb-product-price="200"
          data-sb-product-quantity="1"
          data-sb-product-img="products/сапоги.jpg">
          <img src="products/сапоги.jpg"  width="125" height="125" alt="">
          <h3>Сапоги</h3>
          <p>Цена: 200 рублей</p>
          <button class="add-to-compare" data-product-id="4">Добавить в сравнение</button>
        </li>
      </ul>
    
      

      <script>// Получаем кнопку "Сравнение товаров" и все кнопки "Добавить в сравнение"
        const compareBtn = document.getElementById('compare-btn');
        const addToCompareBtns = document.querySelectorAll('.add-to-compare');
        
        // Создаем массив для хранения выбранных товаров
        let selectedProducts = [];
        
        // Добавляем обработчик клика на кнопку "Сравнение товаров"
        compareBtn.addEventListener('click', function() {
          // Переходим на страницу сравнения товаров, если выбрано больше 1 товара
          if (selectedProducts.length > 1) {
          window.location.href = 'compare.html';
          } else {
          alert('Выберите хотя бы 2 товара для сравнения');
          }
        });
        
        // Добавляем обработчик клика на каждую кнопку "Добавить в сравнение"
        addToCompareBtns.forEach(function(btn) {
          btn.addEventListener('click', function() {
          // Получаем заголовок товара и добавляем его в массив выбранных товаров
          const productTitle = this.parentNode.querySelector('h3').textContent;
          selectedProducts.push(productTitle);
        
          // Делаем кнопку "Добавить в сравнение" неактивной и меняем ее текст
          this.disabled = true;
          this.textContent = 'Добавлено в сравнение';
          });
        });
        
      const addToCompareButtons = document.querySelectorAll('.add-to-compare');
      addToCompareButtons.forEach(button => {
        button.addEventListener('click', () => {
          const productId = button.dataset.productId;
          let selectedProducts = JSON.parse(localStorage.getItem('selectedProducts')) || [];
          const index = selectedProducts.indexOf(productId);
          if (index === -1) {
            selectedProducts.push(productId);
          } else {
            selectedProducts.splice(index, 1);
          }
          localStorage.setItem('selectedProducts', JSON.stringify(selectedProducts));
        });
      });
       </script>
    </body>
    </html>
  
